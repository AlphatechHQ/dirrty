var singleDs=[];(function(c){function a(e){var d;c(singleDs).each(function(){if(c(this)[0].id==e){d=c(this)[0]}});return d}function b(e,d){this.form=e;this.isDirty=false;this.options=d;this.history=["clean","clean"];this.id=c(e).attr("id");singleDs.push(this)}b.prototype={init:function(){this.saveInitialValues();this.setEvents()},saveInitialValues:function(){this.form.find("input, select, textarea").each(function(){c(this).attr("data-dirrty-initial-value",c(this).val())});this.form.find("input[type=checkbox], input[type=radio]").each(function(){if(c(this).is(":checked")){c(this).attr("data-dirrty-initial-value","checked")}else{c(this).attr("data-dirrty-initial-value","unchecked")}})},setEvents:function(){var e=this;c(document).ready(function(){if(e.options.preventLeaving){c(window).on("beforeunload",function(){if(e.isDirty){return e.options.leavingMessage}})}e.form.find("input, select").change(function(){e.checkValues()});e.form.find("input, textarea").on("keyup keydown blur",function(){e.checkValues()});e.form.find("input[type=radio], input[type=checkbox]").on("ifChecked",function(d){e.checkValues()})})},checkValues:function(){var f=this;this.form.find("input, select, textarea").each(function(){var d=c(this).attr("data-dirrty-initial-value");if(c(this).val()!=d){c(this).attr("data-is-dirrty","true")}else{c(this).attr("data-is-dirrty","false")}});this.form.find("input[type=checkbox], input[type=radio]").each(function(){var d=c(this).attr("data-dirrty-initial-value");if(c(this).is(":checked")&&d!="checked"||!c(this).is(":checked")&&d=="checked"){c(this).attr("data-is-dirrty","true")}else{c(this).attr("data-is-dirrty","false")}});var e=false;this.form.find("input, select, textarea").each(function(){if(c(this).attr("data-is-dirrty")=="true"){e=true}});if(e){f.setDirty()}else{f.setClean()}f.fireEvents()},fireEvents:function(){if(this.isDirty&&this.wasJustClean()){this.form.trigger("dirty")}if(!this.isDirty&&this.wasJustDirty()){this.form.trigger("clean")}},setDirty:function(){this.isDirty=true;this.history[0]=this.history[1];this.history[1]="dirty"},setClean:function(){this.isDirty=false;this.history[0]=this.history[1];this.history[1]="clean"},wasJustDirty:function(){return(this.history[0]=="dirty")},wasJustClean:function(){return(this.history[0]=="clean")}};c.fn.dirrty=function(e){if(/^(isDirty)$/i.test(e)){var f=a(c(this).attr("id"));if(!f){var f=new b(c(this),e);f.init()}switch(e){case"isDirty":return f.isDirty;break}}else{if(typeof e=="object"||!e){return this.each(function(){e=c.extend({},c.fn.dirrty.defaults,e);var d=new b(c(this),e);d.init()})}}};c.fn.dirrty.defaults={preventLeaving:true,leavingMessage:"You have unsaved changes",onDirty:function(){},onClean:function(){}}})(jQuery);